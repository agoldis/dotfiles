# I have a competent terminal
set-option -g xterm-keys
set-option -g default-terminal "screen-256color"
set-option -g status-utf8 on

# Control-q for prefix. Bugger all uses it, and it is close
set-option -g prefix "C-q"

# Using vim + tmux requires instant escape codes
set -sg escape-time 0

unbind % # Remove default binding since we’re replacing
unbind '"'
# Split panes using | and -
bind \ split-window -h
bind | split-window -h
bind - split-window -v
bind _ split-window -v

# Prefix C-Q for last pane
bind ^Q last-pane
# Prefix C-Q for last tab/window
bind ` last-window

# Status bar style
# The coloura scheme is purple:
# * colour219 (bright) for focused items
# * colour125 (mid) for other items
# * colour053 (dark) for spacing/padding
set-option -g status-bg colour053 # purple
set-option -g status-fg brightwhite
set-option -g status-left ' #S '
set-option -g status-left-fg colour140
set-option -g status-left-bg black
set-option -g status-right ''
set-option -g status-position top

set-option -g pane-active-border-fg colour219
set-option -g pane-border-fg colour053

set-option -g window-status-fg black
set-option -g window-status-bg colour125
set-option -g window-status-format " #I│#W "
set-option -g window-status-current-fg black
set-option -g window-status-current-bg colour219
set-option -g window-status-current-format "❨#I│#W❩"

set-option -g message-command-fg colour219
set-option -g message-command-bg black
set-option -g message-fg black
set-option -g message-bg colour219

# Switch tabs using shift+left/right
bind -n S-left prev
bind -n S-right next

# Disable repeatable keys when switching panes
bind-key Up    select-pane -U
bind-key Down  select-pane -D
bind-key Left  select-pane -L
bind-key Right select-pane -R

# Switch panes using vim keys
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

# Reload this conf file
bind ^r source-file ~/.tmux.conf

##################################################

# PREFIX m -> ncmpcpp
bind m new-window -n "♫♬" "ncmpcpp"
bind M new-window -n "♫♬@xenia" "ncmpcpp -h xenia"

# PREFIX S -> SSH to a host
bind-key S command-prompt -p 'host:' "new-window -n '⚡ %1' 'ssh %1'"

# PREFIX ^C -> Create named window
bind-key ^C command-prompt -p 'name:' "new-window -n '%1'"
